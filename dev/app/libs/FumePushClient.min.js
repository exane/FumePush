!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.FumePush=n()}}(function(){return function n(t,e,i){function o(s,c){if(!e[s]){if(!t[s]){var u="function"==typeof require&&require;if(!c&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var a=e[s]={exports:{}};t[s][0].call(a.exports,function(n){var e=t[s][1][n];return o(e?e:n)},a,a.exports,n,t,e,i)}return e[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(n,t){var e=function(){var n=function(n,t){this._channelName=t,this._socket=n,this._joinRoom(this._channelName)},t=n.prototype;return t._channelName=null,t._socket=null,t._blacklist=[],t._joinRoom=function(n){this._socket.emit("Join:Room",n)},t.trigger=function(n,t,e){var i=this;e=e||!1,this._socket.emit("Trigger:Event",{room:i._channelName,event:n,data:t,isBroadcasting:e})},t.bind=function(n,t){var e=this;this._socket.on(n,function(i){return e._isBlacklisted(n)?0:"FumePush:PUBLIC"!=i.room&&e._channelName!=i.room?0:void t.call(e,i.data)})},t.unbind=function(n){var t=this;this._blacklist.push({event:n,channel:t._channelName})},t._isBlacklisted=function(n){for(var t=0;t<this._blacklist.length;t++)if(this._blacklist[t].event===n&&this._blacklist[t].channel===this._channelName)return!0;return!1},t.broadcast=function(n,t){this.trigger(n,t,!0)},n}();t.exports=e},{}],2:[function(n,t){var e=function(){var t=n("./FumePush.Channel"),e=function(n,t){this._connect.call(this,n,t)},i=e.prototype;return i._socket=null,i._rooms=[],i._connect=function(n,t){this._socket=io.connect(n+":"+t)},i.trigger=function(n,t){var e=e||!1;this._socket.emit("Trigger:Event",{room:"FumePush:PUBLIC",event:n,data:t,isBroadcasting:e,toAll:!0})},i.bind=function(n,t){var e=this;this._socket.on(n,function(n){t.call(e,n.data)})},i.unbind=function(n){this._socket.removeAllListeners(n)},i.bindOnce=function(n,t){var e=this;this._socket.once(n,function(n){t.call(e,n.data)})},i.subscribe=function(n){var e=new t(this._socket,n);return this._rooms.push(n),e},i.unsubscribe=function(n){this._rooms.splice(n),this._socket.emit("Leave:Room",n);for(var t=0;t<this._rooms.length;t++)if(this._rooms[t]==n)return this._rooms.splice(t,1)},i.disconnect=function(){},e}();t.exports=e},{"./FumePush.Channel":1}]},{},[2])(2)});!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.FumePush=n()}}(function(){return function n(t,e,o){function i(s,u){if(!e[s]){if(!t[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var f=e[s]={exports:{}};t[s][0].call(f.exports,function(n){var e=t[s][1][n];return i(e?e:n)},f,f.exports,n,t,e,o)}return e[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(n,t){var e=function(){var n=function(n,t,e){this._channelName=t,this._socket=n,this._joinRoom(this._channelName),this._fumePush=e},t=n.prototype;return t._channelName=null,t._fumePush=null,t._socket=null,t._joinRoom=function(n){this._socket.emit("Join:Room",n)},t.trigger=function(n,t,e){var o=this;this._fumePush.isJson(t)&&(t=JSON.parse(t)),e=e||!1,this._socket.emit("Trigger:Event",{room:o._channelName,event:n,data:t,isBroadcasting:e})},t.bind=function(n,t){var e=this;this._socket.on(n,function(n){return"FumePush:PUBLIC"!=n.room&&e._channelName!=n.room?0:void t.call(e,n.data)})},t.getChannelName=function(){return this._channelName},t.broadcast=function(n,t){this.trigger(n,t,!0)},n}();t.exports=e},{}],2:[function(n,t){var e=function(){var t=n("./FumePush.Channel"),e=function(n,t){if(!n)throw new Error("Missing url");if(!t)throw new Error("Missing port");this._connect.call(this,n,t)},o=e.prototype;return o._socket=null,o._rooms=[],o._connect=function(n,t){this._socket=io.connect(n+":"+t)},o.trigger=function(n,t){if("function"==typeof t)throw new Error("no functions allowed");this.isJson(t)&&(t=JSON.parse(t)),this._socket.emit("Trigger:Event",{room:"FumePush:PUBLIC",event:n,data:t,isBroadcasting:!1,toAll:!0})},o.isJson=function(n){try{JSON.parse(n)}catch(t){return!1}return!0},o.bind=function(n,t){var e=this;this._socket.on(n,function(n){t.call(e,n.data)})},o.subscribe=function(n){var e=new t(this._socket,n,this);return this._rooms.push(n),e},o.unsubscribe=function(n){this._rooms.splice(n),this._socket.emit("Leave:Room",n);for(var t=0;t<this._rooms.length;t++)if(this._rooms[t]==n)return this._rooms.splice(t,1)},o.disconnect=function(){},e}();t.exports=e},{"./FumePush.Channel":1}]},{},[2])(2)});